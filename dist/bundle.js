(()=>{"use strict";function e(t){var n;if(null==t||!1===t)return document.createTextNode("");if("string"==typeof t||"number"==typeof t||!0===t)return document.createTextNode(t);if(Array.isArray(t)){var a=document.createDocumentFragment();return t.forEach((function(t){var n=e(t);a.appendChild(n)})),a}var c=document.createElement(t.tag);t.cls&&(n=c.classList).add.apply(n,[].concat(t.cls).filter(Boolean)),t.attrs&&Object.keys(t.attrs).forEach((function(e){c.setAttribute(e,t.attrs[e])}));var i=e(t.content);return c.appendChild(i),c}window.game={DIFFICULT:"",GAME_STATUS:"CHOOSE_DIFFICULT",DECK_CARDS:["spades_ace","spades_king","spades_queen","spades_jack","spades_ten","spades_nine","spades_eight","spades_seven","spades_six","diamonds_ace","diamonds_king","diamonds_queen","diamonds_jack","diamonds_ten","diamonds_nine","diamonds_eight","diamonds_seven","diamonds_six","clubs_ace","clubs_king","clubs_queen","clubs_jack","clubs_ten","clubs_nine","clubs_eight","clubs_seven","clubs_six","hearts_ace","hearts_king","hearts_queen","hearts_jack","hearts_ten","hearts_nine","hearts_eight","hearts_seven","hearts_six"],RANDOM_CARDS:[],TIMER:""};var t=document.querySelector(".screen-difficult"),n=t.querySelector(".difficult"),a=n.querySelector(".difficult__field-buttons"),c=n.querySelector(".difficult__button-start"),i=document.querySelector(".screen-play"),r=document.querySelector(".screen-end-game_hidden");function s(){var t,n=i.querySelector(".header__timer-scale"),a=i.querySelector(".screen-play__block-cards"),c=i.querySelector(".header__button-start-again");switch(a.innerHTML="",n.textContent="00.00",window.game.RANDOM_CARDS=[],window.game.TIMER="",window.game.DIFFICULT){case"3":a.style.width="315px";break;case"6":a.style.width="425px";break;default:a.style.width="645px"}function r(e){e.style.pointerEvents="none"}for(var o=0;o<Number(window.game.DIFFICULT);o++){var l=(t=window.game.DECK_CARDS)[Math.floor(Math.random()*t.length)];window.game.RANDOM_CARDS.includes(l)?o-=1:window.game.RANDOM_CARDS[o]=l}var _=document.createDocumentFragment(),u=function(e){for(var t,n=e.concat(e),a=n.length-1;a>0;a--){var c=Math.floor(Math.random()*(a+1));t=[n[c],n[a]],n[a]=t[0],n[c]=t[1]}return n}(window.game.RANDOM_CARDS);u.forEach((function(t){_.appendChild(e({tag:"div",cls:["card"],attrs:{"data-card_name":t}}))})),a.appendChild(_);var m=0,g=0,f=setInterval((function(){++m>=60&&(g++,m=0);var e=g<10?"0"+String(g):String(g),t=m<10?"0"+String(m):String(m);window.game.TIMER="".concat(e,".").concat(t),n.innerText=window.game.TIMER,"PLAY"!==window.game.GAME_STATUS&&clearInterval(f)}),1e3),v=a.querySelectorAll(".card");Array.from(v).forEach((function(e){e.style.backgroundImage="url(./static/".concat(e.dataset.card_name,".png"),r(e)})),setTimeout((function(){v.forEach((function(e){e.style.backgroundImage="url(./static/card_back.png",function(e){e.style.pointerEvents="auto"}(e)}))}),5e3);var h,w,S=!1;function b(){if(this.style.backgroundImage="url(./static/".concat(this.dataset.card_name,".png"),this!==h){if(!S)return S=!0,void r(h=this);w=this,S=!1,function(){if(h.dataset.card_name===w.dataset.card_name)return r(w),h.classList.add("card-face"),w.classList.add("card-face"),Array.from(v).every((function(e){return e.classList.contains("card-face")}))?(window.game.GAME_STATUS="win",void d(window.game.GAME_STATUS,"Вы выиграли!")):void 0;window.game.GAME_STATUS="lose",d(window.game.GAME_STATUS,"Вы проиграли!")}()}}v.forEach((function(e){e.addEventListener("click",b)})),c.addEventListener("click",(function(){clearInterval(f),s()}))}function d(n,a){r.innerHTML="",r.appendChild(e({tag:"div",cls:["end-game","block"],content:[{tag:"div",cls:["end-game__field-images"],content:[{tag:"img",cls:["end-game__image","block__image"],attrs:{src:"./static/".concat(n,".png"),alt:n}}]},{tag:"h2",cls:["end-game__title","block__title"],content:a},{tag:"p",cls:["end-game__text","block__text"],content:"Затраченное время:"},{tag:"p",cls:["end-game__time","block__time"],content:window.game.TIMER},{tag:"button",cls:["end-game__button-start-again","button-start"],content:"Играть снова"}]})),document.querySelector(".end-game__button-start-again").addEventListener("click",(function(){r.classList.add("screen-end-game_hidden"),t.classList.remove("screen-difficult_hidden")})),i.classList.add("screen-play_hidden"),r.classList.remove("screen-end-game_hidden")}a.addEventListener("click",(function(e){var t=e.target;window.game.DIFFICULT=t.dataset.level;for(var n=a.querySelectorAll(".difficult__button-level"),c=0,i=Array.from(n);c<i.length;c++)i[c].classList.remove("difficult__button-level_select");t.classList.add("difficult__button-level_select")})),c.addEventListener("click",(function(){(window.game.DIFFICULT||""!==window.game.DIFFICULT&&void 0!==window.game.DIFFICULT)&&(t.classList.add("screen-difficult_hidden"),i.classList.remove("screen-play_hidden"));for(var e=a.querySelectorAll(".difficult__button-level"),n=function(e){e.classList.add("difficult__button-level_alert"),setTimeout((function(){return e.classList.remove("difficult__button-level_alert")}),1500)},c=0,r=Array.from(e);c<r.length;c++)n(r[c]);window.game.GAME_STATUS="PLAY",s()}))})();
//# sourceMappingURL=bundle.js.map